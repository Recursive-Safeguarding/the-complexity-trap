# Bayesian search with early stopping
# 6 models Ã— 4 strategies, 20 instances, $3/instance cap
# wandb sweep sweeps/smart_search.yaml && wandb agent <id>

program: scripts/run_sweep.py
method: bayes

metric:
  name: submission_rate
  goal: maximize

early_terminate:
  type: hyperband
  min_iter: 3
  eta: 2
  s: 2

parameters:
  model:
    values:
      - deepseek-chat
      - bedrock-qwen3-32b
      - glm-4.6
      - kimi-k2
      - minimax-m2
      - gpt-4o-mini

  strategy:
    values:
      - observation_masking
      - hybrid
      - llm_summary
      - raw

  summarizer_model:
    value: same

  instances_subset:
    value: verified

  instances_slice:
    value: ":20"

  instances_shuffle:
    value: true

  instances_shuffle_seed:
    value: 42

  call_limit:
    value: 250

  cost_limit:
    value: 3.0

  num_workers:
    value: 1

command:
  - ${env}
  - python
  - ${program}
  - --model
  - ${model}
  - --strategy
  - ${strategy}
  - --summarizer-model
  - ${summarizer_model}
  - --instances-subset
  - ${instances_subset}
  - --instances-slice
  - ${instances_slice}
  - --instances-shuffle
  - ${instances_shuffle}
  - --instances-shuffle-seed
  - ${instances_shuffle_seed}
  - --call-limit
  - ${call_limit}
  - --cost-limit
  - ${cost_limit}
  - --num-workers
  - ${num_workers}
  - --wandb
  - --wandb-project
  - complexity-trap-repro
