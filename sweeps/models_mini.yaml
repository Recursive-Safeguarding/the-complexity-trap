# Bayesian search on verified-mini (50 curated instances)
# 6 models × 4 strategies × 6 summarizers = 84 effective combinations
# (raw/obs_masking ignore summarizer: 6+6+36+36=84)

program: scripts/run_sweep.py
method: bayes
metric: {name: submission_rate, goal: maximize}
early_terminate: {type: hyperband, min_iter: 3, eta: 2, s: 2}

parameters:
  model: {values: [deepseek-chat, bedrock-qwen3-32b, glm-4.6, kimi-k2, minimax-m2, gpt-4o-mini]}
  strategy: {values: [raw, observation_masking, llm_summary, hybrid]}
  summarizer-model: {values: [deepseek-chat, bedrock-qwen3-32b, glm-4.6, kimi-k2, minimax-m2, gpt-4o-mini]}

  # observation_masking, hybrid
  hp-obs-n: {values: [5, 10, 15]}

  # llm_summary, hybrid
  hp-sum-n: {values: [15, 21, 28]}
  hp-sum-keep-m: {values: [7, 10, 12]}
  hp-sum-static-checkpoint: {values: [true, false]}
  hp-sum-extract-actions: {values: [true, false]}

  instances-subset: {value: verified-mini}
  instances-shuffle: {value: true}
  instances-shuffle-seed: {value: 42}
  call-limit: {value: 250}
  cost-limit: {value: 3.0}
  num-workers: {value: 1}

command:
  - ${env}
  - python
  - ${program}
  - ${args}
  - --wandb
  - --wandb-project=complexity-trap-mini
